{"ast":null,"code":"import _defineProperty from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HIMANSHI/Desktop/Face-Detection/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import*as faceapi from'face-api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewPost=function NewPost(_ref){var image=_ref.image;var imgRef=useRef();var canvasRef=useRef();var url=image.url,width=image.width,height=image.height;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),faces=_useState2[0],setFaces=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),friends=_useState4[0],setFriends=_useState4[1];var handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var detections;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return faceapi.detectAllFaces(imgRef.current,new faceapi.TinyFaceDetectorOptions());case 2:detections=_context.sent;// .withFaceLandmarks()\n// .withFaceExpressions();\n// .withAgeAndGender();\nconsole.log(detections);setFaces(detections.map(function(d){return Object.values(d.box);}));// console.log(faces);\n// canvasRef.current.innerHtml = faceapi.createCanvasFromMedia(imgRef.current);\n// faceapi.matchDimensions(canvasRef.current, {\n//   width,\n//   height,\n//   // width : \"600\",\n//   // height : \"500\",\n// })\n// const resized = faceapi.resizeResults(detections,{\n//   width,\n//   height,\n//   // width : \"600\",\n//   // height : \"500\",\n// })\n// faceapi.draw.drawDetections(canvasRef.current, resized);\n// faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n// faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);\ncase 5:case\"end\":return _context.stop();}},_callee);}));return function handleImage(){return _ref2.apply(this,arguments);};}();var enter=function enter(){var ctx=canvasRef.current.getContext(\"2d\");ctx.lineWidth=5;ctx.strokeStyle=\"green\";faces.map(function(face){return ctx.strokeRect.apply(ctx,_toConsumableArray(face));});};useEffect(function(){var loadModels=function loadModels(){Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")// faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\n// faceapi.nets.ageGenderNet.loadFromUri(\"/models\"),\n]).then(handleImage).catch(function(e){return console.log(e);});};// \nimgRef.current&&loadModels();},[]);var addFriend=function addFriend(e){setFriends(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.name,e.target.value));});};console.log(friends);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",style:{width:width,height:height},children:[/*#__PURE__*/_jsx(\"img\",{ref:imgRef,crossOrigin:\"anonymous\",src:url,className:\"leftImage\",alt:\"\"}),/*#__PURE__*/_jsx(\"canvas\",{onMouseEnter:enter,ref:canvasRef,width:width,height:height}),faces.map(function(face,i){return/*#__PURE__*/_jsx(\"input\",{name:\"input\".concat(i),style:{left:face[0],top:face[1]+face[3]+5},placeholder:\"Tag a friend\",className:\"friendInput\",onChange:addFriend},i);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Share your Post\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"What's on your mind?\",className:\"rightInput\"}),friends&&/*#__PURE__*/_jsxs(\"span\",{className:\"friends\",children:[\"with \",/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:Object.values(friends)+\" \"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"rightButton\",children:\"Send\"})]})]});};export default NewPost;","map":{"version":3,"names":["useEffect","useRef","useState","faceapi","jsx","_jsx","jsxs","_jsxs","NewPost","_ref","image","imgRef","canvasRef","url","width","height","_useState","_useState2","_slicedToArray","faces","setFaces","_useState3","_useState4","friends","setFriends","handleImage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","detections","wrap","_callee$","_context","prev","next","detectAllFaces","current","TinyFaceDetectorOptions","sent","console","log","map","d","Object","values","box","stop","apply","arguments","enter","ctx","getContext","lineWidth","strokeStyle","face","strokeRect","_toConsumableArray","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e","addFriend","_objectSpread","_defineProperty","target","name","value","className","children","style","ref","crossOrigin","src","alt","onMouseEnter","i","concat","left","top","placeholder","onChange","type"],"sources":["C:/Users/HIMANSHI/Desktop/Face-Detection/src/components/NewPost.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\r\nimport * as faceapi from 'face-api.js';\r\n\r\nconst NewPost = ({ image }) => {\r\n\r\n\r\n  const imgRef = useRef();\r\n  const canvasRef = useRef();\r\n  const { url, width, height } = image;\r\n\r\n\r\n  const [faces, setFaces] = useState([]);\r\n  const [friends, setFriends] = useState([]);\r\n\r\n  const handleImage = async () => {\r\n    const detections = await faceapi.detectAllFaces(\r\n      imgRef.current,\r\n      new faceapi.TinyFaceDetectorOptions());\r\n    // .withFaceLandmarks()\r\n    // .withFaceExpressions();\r\n    // .withAgeAndGender();\r\n\r\n    console.log(detections);\r\n    setFaces(detections.map(d => Object.values(d.box)));\r\n    // console.log(faces);\r\n\r\n    // canvasRef.current.innerHtml = faceapi.createCanvasFromMedia(imgRef.current);\r\n    // faceapi.matchDimensions(canvasRef.current, {\r\n    //   width,\r\n    //   height,\r\n    //   // width : \"600\",\r\n    //   // height : \"500\",\r\n    // })\r\n\r\n    // const resized = faceapi.resizeResults(detections,{\r\n    //   width,\r\n    //   height,\r\n    //   // width : \"600\",\r\n    //   // height : \"500\",\r\n    // })\r\n    // faceapi.draw.drawDetections(canvasRef.current, resized);\r\n    // faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\r\n    // faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);\r\n  };\r\n\r\n  const enter = () => {\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    ctx.lineWidth = 5;\r\n    ctx.strokeStyle = \"green\";\r\n    faces.map((face) => ctx.strokeRect(...face));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n    // faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n        \r\n        // faceapi.nets.ageGenderNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    // \r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  const addFriend = (e) => {\r\n    setFriends(prev => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n  console.log(friends);\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"left\" style={{width,height}}>\r\n        <img ref={imgRef}\r\n          crossOrigin=\"anonymous\"\r\n          src={url}\r\n          className=\"leftImage\"\r\n          alt=\"\"\r\n        />\r\n        <canvas onMouseEnter={enter} ref={canvasRef}\r\n          width={width}\r\n          height={height}\r\n        />\r\n        {faces.map((face, i) => (\r\n          <input\r\n            name={`input${i}`}\r\n            style={{ left: face[0], top: (face[1] + face[3] + 5) }}\r\n            placeholder=\"Tag a friend\" key={i}\r\n            className=\"friendInput\"\r\n            onChange={addFriend}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"right\">\r\n        <h1>Share your Post</h1>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"What's on your mind?\"\r\n          className=\"rightInput\"\r\n        />\r\n        {friends && (\r\n          <span \r\n          className=\"friends\">\r\n          with <span  \r\n            className=\"name\">\r\n            {Object.values(friends) + \" \"}\r\n          </span>\r\n        </span>\r\n        )}\r\n        <button className=\"rightButton\">Send</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewPost\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}